!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(1),r=n(13),i=n(14),s=n(15),u=n(16),l={text:r.RenderText,tag:i.RenderTag,component:s.RenderComponent,null:u.RenderNull};e.Render=function(t,e=null){const n=o.VDomType(t);if(n)return l[n](t,e);throw`invalid node: ${JSON.stringify(t,null,4)} found!`}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(5);e.DomType=function(t){return t instanceof Text?"text":"tag"},e.VDomType=function(t){if(!t)return"null";if("string"==typeof t||"number"==typeof t)return"text";if("object"==typeof t&&"string"==typeof t.type)return"tag";if("object"==typeof t&&"function"==typeof t.type)return"component";throw`unknown vdom type! vdom: ${JSON.stringify(t,null,4)}`},e.ComponenType=function(t){return o.Component.isPrototypeOf(t)?"class":"function"},e.Flat=function(t){return function t(e){return e.reduce((e,n)=>Array.isArray(n)?e.concat(t(n)):e.concat(n),[])}([...t]).filter(t=>null!==t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(9),r=n(10),i=n(3),s=n(11),u=n(12),l={text:o.PatchText,same_tag:r.PatchSameTag,tag_by_text:i.FullRender,text_by_tag:i.FullRender,diff_tag:i.FullRender,component:s.PatchByComponent,null:u.PatchNull};e.Patch=function({vdom:t,dom:e}){const n=i.PatchType({vdom:t,dom:e});if(n)return l[n]({vdom:t,dom:e});throw`unknown patch type! vdom: ${JSON.stringify(t,null,4)} dom:${JSON.stringify(e,null,4)}`}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(0),r=n(1);function i({old_child:t,new_child:e}){return t.parentNode.replaceChild(e,t),e}e.Replace=i,e.FullRender=function({dom:t,vdom:e}){return i({old_child:t,new_child:o.Render(e)})},e.PatchType=function({dom:t,vdom:e}){if("null"===r.VDomType(e))return"null";if("component"===r.VDomType(e))return"component";if("tag"===r.VDomType(e)&&"tag"===r.DomType(t)&&t.nodeName===e.type.toUpperCase())return"same_tag";if("tag"===r.VDomType(e)&&"tag"===r.DomType(t)&&t.nodeName!==e.type.toUpperCase())return"diff_tag";if("text"===r.VDomType(e)&&"text"===r.DomType(t))return"text";if("text"===r.VDomType(e)&&"tag"===r.DomType(t))return"tag_by_text";if("tag"===r.VDomType(e)&&"text"===r.DomType(t))return"text_by_tag";throw`unknown patch type! vdom: ${JSON.stringify(e,null,4)} dom:${JSON.stringify(t,null,4)}`}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mount=function(t,e=null){return e?e.appendChild(t):t},e.SetAttribute=function(t,e,n){if("function"==typeof n&&e.startsWith("on")){let o=e.slice(2).toLowerCase();"change"===o&&(o="input");const r=t;r.__RigidHandlers__=r.__RigidHandlers__||{},r.removeEventListener(o,r.__RigidHandlers__[o]),r.__RigidHandlers__[o]=n,r.addEventListener(o,r.__RigidHandlers__[o])}else"style"==e&&"object"==typeof n?Object.assign(t.style,n):"key"===e?t.__RigidKey__=n:t[e]=n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(2);e.Component=class{constructor(t){this.props=t||{},this.state=null}SetState(t){this.ShouldComponentUpdate(this.props,t)?(this.ComponentWillUpdate(this.props,t),this.state=Object.assign({},this.state,t),o.Patch({dom:this.base,vdom:this.Render()}),this.ComponentDidUpdate(this.props,t)):this.state=Object.assign({},this.state,t)}ComponentWillMount(){}ComponentDidMount(){}ComponentWillUnmount(){}ComponentWillReceiveProps(t){}ComponentWillUpdate(t,e){}ComponentDidUpdate(t,e){}ShouldComponentUpdate(t,e){return!0}}},function(t,e,n){const{Render:o,CreateElement:r,Component:i,Patch:s}=n(7),u=t=>r("tr",null,r("td",null,r("label",null,t.id)),r("td",null,r("input",null)),r("td",null,r("label",null,t.createdAt.toTimeString())));o(r(class extends i{constructor(){super();const t=new Date;this.state={list:[{id:1,createdAt:t}],toDoCounter:1}}sortByEarliest(){const t=this.state.list.sort((t,e)=>t.createdAt-e.createdAt);this.SetState({list:[...t]})}sortByLatest(){const t=this.state.list.sort((t,e)=>e.createdAt-t.createdAt);this.SetState({list:[...t]})}addToEnd(){const t=new Date,e=this.state.toDoCounter+1,n=[...this.state.list,{id:e,createdAt:t}];this.SetState({list:n,toDoCounter:e})}addToStart(){const t=new Date,e=this.state.toDoCounter+1,n=[{id:e,createdAt:t},...this.state.list];this.SetState({list:n,toDoCounter:e})}Render(){return r("div",null,r("code",null,"key=id"),r("br",null),r("button",{onClick:this.addToStart.bind(this)},"Add New to Start"),r("button",{onClick:this.addToEnd.bind(this)},"Add New to End"),r("button",{onClick:this.sortByEarliest.bind(this)},"Sort by Earliest"),r("button",{onClick:this.sortByLatest.bind(this)},"Sort by Latest"),r("table",null,r("tr",null,r("th",null,"ID"),r("th",null),r("th",null,"created at")),this.state.list.map((t,e)=>r(u,{key:t.id,id:t.id,createdAt:t.createdAt}))))}},null),document.getElementById("root"))},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n(8)),o(n(0)),o(n(5)),o(n(2))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CreateElement=function(t,e,...n){return{type:t,props:e||{},children:n||[]}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(0),r=n(3);e.PatchText=function({dom:t,vdom:e}){return t.textContent!==e.toString()?r.Replace({old_child:t,new_child:o.Render(e)}):t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(0),r=n(2),i=n(4),s=n(1);e.PatchSameTag=function({dom:t,vdom:e}){const n=new Map,u=document.activeElement;s.Flat(t.childNodes).forEach((t,e)=>{const o=t.__RigidKey__||`__index__${e}`;n.set(o,t)}),s.Flat(e.children).forEach((e,i)=>{const s=e.props&&e.props.key||`__index__${i}`,u=n.get(s)?r.Patch({dom:n.get(s),vdom:e}):o.Render(e);u&&t.appendChild(u),n.delete(s)}),n.forEach(t=>{const e=t.__RigidInstance__;e&&e.ComponentWillUnmount(),t.remove()});for(const e of t.attributes)t.removeAttribute(e.name);for(const n in e.props)i.SetAttribute(t,n,e.props[n]);return u.focus(),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(2),r=n(1),i=n(3);e.PatchByComponent=function({dom:t,vdom:e}){const n=Object.assign({},e.props,{children:e.children}),s=e.type;if(t.__RigidInstance__){const r=t.__RigidInstance__;if(r.constructor===s){if(r.ComponentWillReceiveProps(n),r.props=n,r.ShouldComponentUpdate(r.props,r.state)){r.ComponentWillUpdate(r.props,r.state);const e=o.Patch({dom:t,vdom:r.Render()});return r.ComponentDidUpdate(r.props,r.state),e}return t}return r.ComponentWillUnmount(),i.FullRender({dom:t,vdom:e})}return"function"===r.ComponenType(s)?o.Patch({dom:t,vdom:s(n)}):"class"===r.ComponenType(s)?i.FullRender({dom:t,vdom:e}):void 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PatchNull=function({dom:t}){t.remove()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(4);e.RenderText=function(t,e=null){return o.Mount(document.createTextNode(t.toString()),e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(4),r=n(0),i=n(1);e.RenderTag=function(t,e=null){const n=o.Mount(document.createElement(t.type));return i.Flat(t.children).forEach(t=>r.Render(t,n)),Object.entries(t.props).forEach(t=>o.SetAttribute(n,...t)),o.Mount(n,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(0),r=n(1);e.RenderComponent=function(t,e=null){const n=Object.assign({},t.props,{children:t.children}),i=t.type;if("class"===r.ComponenType(i)){const r=new i(n);return r.ComponentWillMount(),r.base=o.Render(r.Render(),e),r.base.__RigidInstance__=r,r.base.__RigidKey__=t.props.key,r.ComponentDidMount(),r.base}if("function"===r.ComponenType(i)){const r=o.Render(i(n),e);return r&&(r.__RigidKey__=t.props.key),r}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RenderNull=function(t,e=null){return null}}]);